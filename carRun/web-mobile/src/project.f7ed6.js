window.__require=function e(t,o,i){function n(s,a){if(!o[s]){if(!t[s]){var d=s.split("/");if(d=d[d.length-1],!t[d]){var r="function"==typeof __require&&__require;if(!a&&r)return r(d,!0);if(c)return c(d,!0);throw new Error("Cannot find module '"+s+"'")}s=d}var l=o[s]={exports:{}};t[s][0].call(l.exports,function(e){return n(t[s][1][e]||e)},l,l.exports,e,t,o,i)}return o[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({EnemyAI:[function(e,t,o){"use strict";cc._RF.push(t,"7c5dblIKRlMCJ5sPArsCRgB","EnemyAI");var i=e("Global");cc.Class({extends:cc.Component,properties:{_body:cc.RigidBody,moveSpeed:{default:410,type:cc.Integer,tooltip:"\u6b63\u5e38\u901f\u5ea6"},turnSpeed:{default:100,type:cc.Interger,tooltip:"\u8f6c\u5411\u901f\u5ea6"}},setMoveSpeed:function(e,t){this.moveSpeed=e,this.turnSpeed=t},start:function(){this._body=this.node.getComponent(cc.RigidBody),this.Player=cc.find("Canvas/GameNode/Player")},move:function(e){var t=this.node.angle+90,o=cc.misc.radiansToDegrees(Math.atan2(this.Player.y-this.node.y-this.node.parent.y,this.Player.x-this.node.x-this.node.parent.x))-t;if((o%=360)>180?o-=360:o<-180&&(o+=360),Math.abs(o)>e*this.turnSpeed){if(o>=0)var i=e*this.turnSpeed;else i=-e*this.turnSpeed;this.node.angle=this.node.angle+i}var n=cc.v2(Math.cos((this.node.angle+90)/180*Math.PI),Math.sin((this.node.angle+90)/180*Math.PI));this._body.applyForceToCenter(cc.v2(n.x*this.moveSpeed,n.y*this.moveSpeed),!0)},update:function(e){0==i.pause?this.move(e):this._body.linearVelocity=cc.v2(0,0)}}),cc._RF.pop()},{Global:"Global"}],EnemyCollider:[function(e,t,o){"use strict";cc._RF.push(t,"cd5a5fhGyJHEryP/iKabOM1","EnemyCollider");var i=e("Global");cc.Class({extends:cc.Component,properties:{},start:function(){},onBeginContact:function(e,t,o){0==i.pause&&("Enemy"!=o.node.name&&"Wall"!=o.node.name||(t.node.destroy(),i.score+=1))}}),cc._RF.pop()},{Global:"Global"}],EnemyCreater:[function(e,t,o){"use strict";cc._RF.push(t,"a1ac0gopMRIAbbauXlGBr0B","EnemyCreater");var i=e("Global");cc.Class({extends:cc.Component,properties:{moveSpeed:{default:410,displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"},turnSpeed:{default:400,type:cc.Interger,tooltip:"\u8f6c\u5411\u901f\u5ea6"},EnemyPrefab:cc.Prefab,Follow:!1,offset:{default:cc.v2(0,0)}},start:function(){this.Player=cc.find("Canvas/GameNode/Player"),this.schedule(function(){if(0==i.pause){var e=cc.instantiate(this.EnemyPrefab);this.node.addChild(e),e.getComponent("EnemyAI").setMoveSpeed(this.moveSpeed,this.turnSpeed),i.score+=1}},3)},update:function(e){this.Follow&&(this.node.position=cc.v2(this.Player.x+this.offset.x,this.Player.y+this.offset.y))}}),cc._RF.pop()},{Global:"Global"}],GameMainCamera:[function(e,t,o){"use strict";cc._RF.push(t,"fe987Zm0v9L46KVzy9BorNC","GameMainCamera");var i=e("Global");cc.Class({extends:cc.Component,properties:{Player:cc.Node,BackGround:cc.Node,UI_ItemNode:cc.Node,HeartPrefab:cc.Prefab,CoinPrefab:cc.Prefab,targetScore:cc.Integer,UI:cc.Prefab},start:function(){i.init(1,0,0,1);var e=cc.instantiate(this.UI);cc.find("Canvas").addChild(e),this.Controller=cc.find("Canvas/UI/JoyStick"),this.UI_Score=cc.find("Canvas/UI/LayoutScore/Score").getComponent(cc.Label),this.UI_HeartLayout=cc.find("Canvas/UI/HearLayout"),this.UI_Gold=cc.find("Canvas/UI/LayoutGold/Gold").getComponent(cc.Label);for(var t=0;t<i.life;t++){var o=cc.instantiate(this.HeartPrefab);this.UI_HeartLayout.addChild(o)}for(var n=1;n<=10;n++){var c=cc.instantiate(this.CoinPrefab);this.UI_ItemNode.addChild(c),c.setPosition(cc.v2(0,200*n))}},update:function(e){this.node.position=this.Player.position,this.UI_Score.string=i.score+" / "+this.targetScore,this.UI_Gold.string=i.gold,this.UI_HeartLayout.children.length>i.life&&this.UI_HeartLayout.children[this.UI_HeartLayout.children.length-1].destroy()}}),cc._RF.pop()},{Global:"Global"}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"747adSY7KZG6K15MWJ+CVCZ","Global"),t.exports={title:"\u70b9\u51fb\u5f00\u59cb\u6e38\u620f",score:0,level:1,life:3,gold:0,continue:!0,balanceGold:0,godMode:!1,pause:!1,Initialized:!1,init:function(e,t,o){this.score=t,this.life=3,this.gold=o,this.gold=o,this.continue=!0,this.level=e,this.godMode=!1,this.pause=!1}},cc._RF.pop()},{}],JoystickEnum:[function(e,t,o){"use strict";cc._RF.push(t,"29753pvkBhLc5rN/SCpZBwE","JoystickEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i={JoystickType:cc.Enum({FIXED:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0}),SpeedType:cc.Enum({STOP:0,NORMAL:1,FAST:2}),JoystickEventType:cc.Enum({TOUCH_START:"touchStart",TOUCH_MOVE:"touchMove",TOUCH_END:"touchEnd",CHANGE_JOYSTICK_TYPE:"changeJoystickType"})};o.default=i,t.exports=o.default,cc._RF.pop()},{}],JoystickEvent:[function(e,t,o){"use strict";cc._RF.push(t,"96bc3M2TwxGabIeDD4rOmQc","JoystickEvent"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=cc.Class({properties:{_event:null},ctor:function(){this._event=new cc.EventTarget},on:function(e,t,o){this._event.on(e,t,o)},off:function(e,t,o){this._event.off(e,t,o)},emit:function(e){for(var t,o=arguments.length,i=new Array(o>1?o-1:0),n=1;n<o;n++)i[n-1]=arguments[n];(t=this._event).emit.apply(t,[e].concat(i))}}),n=null;i.getInstance=function(){return!n&&(n=new i),n};var c=i;o.default=c,t.exports=o.default,cc._RF.pop()},{}],Joystick:[function(e,t,o){"use strict";cc._RF.push(t,"965d6+vAp1OAajGemdUBWK+","Joystick");var i=c(e("JoystickEnum")),n=c(e("JoystickEvent"));function c(e){return e&&e.__esModule?e:{default:e}}var s=e("Global");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"Dot",tooltip:"\u6447\u6746\u64cd\u7eb5\u70b9"},ring:{default:null,type:cc.Node,displayName:"Ring",tooltip:"\u6447\u6746\u80cc\u666f\u8282\u70b9"},joystickType:{default:i.default.JoystickType.FIXED,type:i.default.JoystickType,displayName:"Touch Type",tooltip:"\u89e6\u6478\u7c7b\u578b"},directionType:{default:i.default.DirectionType.ALL,type:i.default.DirectionType,displayName:"Direction Type",tooltip:"\u65b9\u5411\u7c7b\u578b"},_stickPos:{default:null,type:cc.Node,tooltip:"\u6447\u6746\u6240\u5728\u4f4d\u7f6e"},_touchLocation:{default:null,type:cc.Node,tooltip:"\u89e6\u6478\u4f4d\u7f6e"}},onLoad:function(){this._radius=this.ring.width/2,this._initTouchEvent(),this.joystickType===i.default.JoystickType.FOLLOW&&(this.node.opacity=0)},onEnable:function(){n.default.getInstance().on(i.default.JoystickEventType.CHANGE_JOYSTICK_TYPE,this._onChangeJoystickType,this)},onDisable:function(){n.default.getInstance().off(i.default.JoystickEventType.CHANGE_JOYSTICK_TYPE,this._onChangeJoystickType,this)},_onChangeJoystickType:function(e){this.joystickType=e,this.node.opacity=e===i.default.JoystickType.FIXED?255:0},_initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},_touchStartEvent:function(e){if(!s.pause){n.default.getInstance().emit(i.default.JoystickEventType.TOUCH_START,"joystick touch start",10);var t=this.node.convertToNodeSpaceAR(e.getLocation());if(this.joystickType===i.default.JoystickType.FIXED){this._stickPos=this.ring.getPosition();var o=t.sub(this.ring.getPosition()).mag();this._radius>o&&this.dot.setPosition(t)}else this.joystickType===i.default.JoystickType.FOLLOW&&(this._stickPos=t,this.node.opacity=255,this._touchLocation=e.getLocation(),this.ring.setPosition(t),this.dot.setPosition(t))}},_touchMoveEvent:function(e){if(!s.pause){if(this.joystickType===i.default.JoystickType.FOLLOW&&this._touchLocation===e.getLocation())return!1;var t,o=this.ring.convertToNodeSpaceAR(e.getLocation()),c=o.mag(),a=this._stickPos.x+o.x,d=this._stickPos.y+o.y,r=cc.v2(a,d).sub(this.ring.getPosition()).normalize();if(this._radius>c)this.dot.setPosition(cc.v2(a,d)),t=i.default.SpeedType.NORMAL;else{var l=this._stickPos.x+r.x*this._radius,h=this._stickPos.y+r.y*this._radius;this.dot.setPosition(cc.v2(l,h)),t=i.default.SpeedType.FAST}n.default.getInstance().emit(i.default.JoystickEventType.TOUCH_MOVE,e,{speedType:t,moveDistance:r})}},_touchEndEvent:function(e){s.pause||(this.dot.setPosition(this.ring.getPosition()),this.joystickType===i.default.JoystickType.FOLLOW&&(this.node.opacity=0),n.default.getInstance().emit(i.default.JoystickEventType.TOUCH_END,e,{speedType:i.default.SpeedType.STOP}))}}),cc._RF.pop()},{Global:"Global",JoystickEnum:"JoystickEnum",JoystickEvent:"JoystickEvent"}],PlayerCollider:[function(e,t,o){"use strict";cc._RF.push(t,"8d7ffZh4w1KNp5VrhalVKZQ","PlayerCollider");var i=e("Global");cc.Class({extends:cc.Component,properties:{UI_GameOver:cc.Node,UI_LevelPass:cc.Node},start:function(){this.UI_GameOver=cc.find("Canvas/UI/GameOver"),this.UI_LevelPass=cc.find("Canvas/UI/LevelPass")},onBeginContact:function(e,t,o){0==i.pause&&(0==i.godMode&&("Enemy"!=o.node.name&&"Wall"!=o.node.name||("Enemy"==o.node.name&&(o.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),t.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(2*t.node.getComponent(cc.RigidBody).linearVelocity.x,2*t.node.getComponent(cc.RigidBody).linearVelocity.y)),i.life-=1,i.godMode=!0,i.createrSwitch=!1,i.life<=0?i.continue?(this.UI_GameOver.active=!0,i.pause=!0,i.continue=!1,cc.director.getPhysicsManager().enabled=!1):(this.UI_LevelPass.active=!0,i.pause=!0,cc.director.getPhysicsManager().enabled=!1):(this.schedule(function(){255==this.node.opacity?this.node.opacity=100:this.node.opacity=255},.1,11,.01),this.scheduleOnce(function(){i.godMode=!1,i.createrSwitch=!0},1)))),i.score>=this.targetScore&&(i.pause=!0,this.UI_LevelPass.active=!0,cc.director.getPhysicsManager().enabled=!1)),"Coin"==o.node.name&&(o.node.destroy(),i.gold+=1)}}),cc._RF.pop()},{Global:"Global"}],gameover:[function(e,t,o){"use strict";cc._RF.push(t,"5cc75tQtT9I+K2T4PMNgP7w","gameover");var i=e("Global");cc.Class({extends:cc.Component,properties:{UI_Heart:cc.Node,HeartPrefab:cc.Prefab},start:function(){this.Player=cc.find("Canvas/GameNode/Player")},onBackbtnClick:function(){this.onGetRewardClick()},onWatchADbtnClick:function(){i.pause=!1;for(var e=0;e<i.life;e++){var t=cc.instantiate(this.HeartPrefab);this.UI_Heart.addChild(t)}this.node.active=!1,cc.director.getPhysicsManager().enabled=!0,i.godMode=!0,this.schedule(function(){255==this.Player.opacity?this.Player.opacity=100:this.Player.opacity=255},.1,11,.01),this.scheduleOnce(function(){i.godMode=!1},1)},onGetRewardClick:function(){i.balanceGold+=i.gold,cc.director.loadScene("Main"),cc.loader.release("Level_"+i.level)},onGetDoubleRewardClick:function(){i.balanceGold+=2*i.gold,cc.director.loadScene("Main"),cc.loader.release("Level_"+i.level)}}),cc._RF.pop()},{Global:"Global"}],main:[function(e,t,o){"use strict";cc._RF.push(t,"68f15XkLAVMxIKcHO0eOWm4","main");var i=e("Global");cc.Class({extends:cc.Component,properties:{Lable:cc.Node,UI_Gold:cc.Label,UI_Level:cc.Label,ProgressBar:cc.Node},start:function(){this.Lable.string=i.title,this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),i.Initialized||(i.Initialized=!0,i.balanceGold=100)},_touchEndEvent:function(e){this.Lable.active&&(this.Lable.active=!1,this.ProgressBar.active=!0,cc.director.preloadScene("Level_"+i.level,this.onProgress.bind(this),function(){cc.director.loadScene("Level_"+i.level)}))},onProgress:function(e,t,o){this.ProgressBar.progress=e/t},update:function(e){this.UI_Gold.string=i.balanceGold,this.UI_Level.string="\u7b2c "+i.level+" \u5173"}}),cc._RF.pop()},{Global:"Global"}],playerPhysics:[function(e,t,o){"use strict";cc._RF.push(t,"e466cSQbytE4aWeyIpUZUY8","playerPhysics");var i=c(e("../joystick/JoystickEnum")),n=c(e("../joystick/JoystickEvent"));function c(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{moveDir:{default:cc.v2(0,1),displayName:"Move Dir",tooltip:"\u79fb\u52a8\u65b9\u5411"},_speedType:{default:i.default.SpeedType.STOP,displayName:"Speed Type",type:i.default.SpeedType,tooltip:"\u901f\u5ea6\u7ea7\u522b"},_moveSpeed:{default:0,displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"},stopSpeed:{default:100,type:cc.Integer,tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"},normalSpeed:{default:200,type:cc.Integer,tooltip:"\u6b63\u5e38\u901f\u5ea6"},fastSpeed:{default:400,type:cc.Integer,tooltip:"\u6700\u5feb\u901f\u5ea6"},turnSpeed:{default:200,type:cc.Interger,tooltip:"\u8f6c\u5411\u901f\u5ea6"},_body:cc.RigidBody,GameNode:cc.Node},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,this._body=this.node.getComponent(cc.RigidBody),n.default.getInstance().on(i.default.JoystickEventType.TOUCH_START,this.onTouchStart,this),n.default.getInstance().on(i.default.JoystickEventType.TOUCH_MOVE,this.onTouchMove,this),n.default.getInstance().on(i.default.JoystickEventType.TOUCH_END,this.onTouchEnd,this)},onTouchStart:function(){},onTouchMove:function(e,t){this._speedType=t.speedType,this.moveDir=t.moveDistance},onTouchEnd:function(e,t){this._speedType=t.speedType},move:function(e){var t=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))-(this.node.angle+90);if(t>180?t-=360:t<-180&&(t+=360),Math.abs(t)>e*this.turnSpeed){if(t>=0)var o=e*this.turnSpeed;else o=-e*this.turnSpeed;this.node.angle=(this.node.angle+o)%360}var i=cc.v2(Math.cos((this.node.angle+90)/180*Math.PI),Math.sin((this.node.angle+90)/180*Math.PI));this._body.applyForceToCenter(cc.v2(i.x*this._moveSpeed,i.y*this._moveSpeed),!0)},update:function(e){if(Math.abs(this.node.position.x)>=this.GameNode._contentSize.width/2)if(this.node.position.x>0){this.node.setPosition(cc.v2(this.node.position.x-this.GameNode._contentSize.width,this.node.position.y));for(var t=0;t<this.EnemyCreater.length;t++)for(var o=this.EnemyCreater[t]._children,n=0;n<o.length;n++){var c=o[n];c.setPosition(c.x-this.GameNode._contentSize.width,c.y)}}else{this.node.setPosition(cc.v2(this.node.position.x+this.GameNode._contentSize.width,this.node.position.y));for(var s=0;s<this.EnemyCreater.length;s++)for(var a=this.EnemyCreater[s]._children,d=0;d<a.length;d++){var r=a[d];r.setPosition(r.x+this.GameNode._contentSize.width,r.y)}}if(Math.abs(this.node.position.y)>=this.GameNode._contentSize.height/2)if(this.node.position.y>0){this.node.setPosition(cc.v2(this.node.position.x,this.node.position.y-this.GameNode._contentSize.height));for(var l=0;l<this.EnemyCreater.length;l++)for(var h=this.EnemyCreater[l]._children,p=0;p<h.length;p++){var u=h[p];u.setPosition(u.x,u.y-this.GameNode._contentSize.height)}}else{this.node.setPosition(cc.v2(this.node.position.x,this.node.position.y+this.GameNode._contentSize.height));for(var y=0;y<this.EnemyCreater.length;y++)for(var f=this.EnemyCreater[y]._children,v=0;v<f.length;v++){var _=f[v];_.setPosition(_.x,_.y+this.GameNode._contentSize.height)}}switch(this._speedType){case i.default.SpeedType.STOP:this._moveSpeed=this.stopSpeed;break;case i.default.SpeedType.NORMAL:this._moveSpeed=this.normalSpeed;break;case i.default.SpeedType.FAST:this._moveSpeed=this.fastSpeed}this._speedType!==i.default.SpeedType.STOP&&this.move(e)}}),cc._RF.pop()},{"../joystick/JoystickEnum":"JoystickEnum","../joystick/JoystickEvent":"JoystickEvent"}]},{},["Global","EnemyCollider","PlayerCollider","EnemyAI","EnemyCreater","GameMainCamera","playerPhysics","Joystick","JoystickEnum","JoystickEvent","gameover","main"]);