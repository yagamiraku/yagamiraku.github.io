window.__require=function e(t,o,i){function c(n,a){if(!o[n]){if(!t[n]){var l=n.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!a&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+n+"'")}n=l}var h=o[n]={exports:{}};t[n][0].call(h.exports,function(e){return c(t[n][1][e]||e)},h,h.exports,e,t,o,i)}return o[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<i.length;n++)c(i[n]);return c}({Block:[function(e,t,o){"use strict";cc._RF.push(t,"eb13aNsyxVNg5pgEpnmwfF/","Block"),cc.Class({extends:cc.Component,properties:function(){return{id:0,type:null,x:null,y:null,level:0,active:!0,seleced:!1}},onLoad:function(){},start:function(){},crush:function(e,t){return void 0==e&&void 0==t?(this.node.scaleTo(.3,0),cc.callFunc(this.destroySelf())):(this.moveTo(e,t),this.node.moveTo(.3,cc.v2()),cc.callFunc(this.destroySelf()))},destroySelf:function(){this.node.destroy},levelUp:function(e){this.level=e,this.setTexture()},init:function(e,t,o,i,c){this.id=e,this.type=t,this.level=o,this.setPos(i,c)},setPos:function(e,t){this.x=e,this.y=t,this.setBlockPos()},setTexture:function(){var e=this;cc.loader.loadRes("block/Block_"+this.id+"_"+this.level,cc.SpriteFrame,function(t,o){(null!=t&&console.log(t),null!=e.node)&&(e.node.getComponent(cc.Sprite).spriteFrame=o)})},lock:function(){this.active=!1,this.node.opacity=50},unLock:function(){this.active=!0,this.node.opacity=255},select:function(){this.seleced=!0,this.node.opacity=200},unSelect:function(){this.seleced=!1,this.node.opacity=255},setActive:function(e){this.active=e},setBlockPos:function(){this.node.setPosition(cc.v2(64*this.x+32,64*this.y+32))},moveTo:function(e,t){cc.tween(this.node).to(.3,{position:cc.v2(64*e+32,64*t+32),angle:0}).start()},setLevel:function(e){this.level=e},setType:function(e){this.type=e}}),cc._RF.pop()},{}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"38ae8uBPdVH0KwRMApDiXu7","Game");var i=e("Global");cc.Class({extends:cc.Component,properties:function(){return{MapNode:cc.Node,MapScrollView:cc.ScrollView,MapDotSprite:cc.SpriteFrame,MapMonsterSprite:cc.SpriteFrame,MapCircleSprite:cc.SpriteFrame,MapSlimeSprite:cc.SpriteFrame,BackButtonNode:cc.Node,BlockPrefeb:cc.Prefab,BlockGroup:cc.Node,MatchingController:cc.Node,PlayerVIT:cc.Label,PlayerHP:cc.Label,EnemyHP:cc.Label}},onLoad:function(){this.lastPos=cc.Vec2(-10,-10),this.isInPlayAni=!1,this.Blocks=null,this.isTouchMove=!1,this.isCanMove=!0,this.matchList=[],this.matchCount=0,this.blockCrushQueue=[],this.Enemy={id:0,enemyName:"",MAXHP:0,HP:0,ACT:0,DEF:0,HEL:0},this.PlayerRoundACT=0,this.PlayerRoundDEF=0,this.PlayerRoundHEL=0},start:function(){i.initPlayerData(),this.createMap(),this.MapScrollView.scrollToBottom(3),this.Blocks=[];for(var e=0;e<7;e++){this.Blocks[e]=[];for(var t=0;t<6;t++)this.Blocks[e][t]=null,this.createBlock(e,t)}},updateUIdata:function(){this.PlayerVIT.string="\u4f53\u529b: "+i.PlayerVIT+" / "+i.PlayerMAXVIT,this.PlayerHP.string="\u8840\u91cf: "+i.PlayerHP+" / "+i.PlayerMAXHP,null!=this.Enemy&&(this.EnemyHP.string="\u654c\u4eba\u8840\u91cf: "+this.Enemy.HP+" / "+this.Enemy.MAXHP)},initEnemyFromList:function(e){var t=i.Enemys[i.EnemyList[e]].id,o=i.Enemys[i.EnemyList[e]].enemyName,c=i.Enemys[i.EnemyList[e]].MAXHP,s=i.Enemys[i.EnemyList[e]].HP,n=i.Enemys[i.EnemyList[e]].ACT,a=i.Enemys[i.EnemyList[e]].DEF,l=i.Enemys[i.EnemyList[e]].HEL;this.Enemy={id:t,enemyName:o,MAXHP:c,HP:s,ACT:n,DEF:a,HEL:l}},showMachtingUI:function(e){this.MatchingController.active=e,this.PlayerVIT.node.active=e,this.PlayerHP.node.active=e,this.EnemyHP.node.active=e},scanPoint:function(e,t,o){this.matchList.splice(0);for(var i=[],c=1;c<=2;c++){if(this.checkPoint(e,t,c),this.matchList.length>=3)for(var s=0;s<this.matchList.length;s++)0==o&&this.Blocks[this.matchList[s].x][this.matchList[s].y].lock(),this.PosCheck(i,this.matchList[s].x,this.matchList[s].y)&&i.push(this.matchList[s]);this.matchList.splice(0)}return i},checkPoint:function(e,t,o){var i,c=this.Blocks[e][t];null!=c&&(this.matchList.push(cc.v2(e,t)),null!=(i=t-1>=0?cc.v2(e,t-1):null)&&1==o&&this.checkNextPoint(i,o,c),null!=(i=t+1<=5?cc.v2(e,t+1):null)&&1==o&&this.checkNextPoint(i,o,c),null!=(i=e-1>=0?cc.v2(e-1,t):null)&&2==o&&this.checkNextPoint(i,o,c),null!=(i=e+1<=6?cc.v2(e+1,t):null)&&2==o&&this.checkNextPoint(i,o,c))},checkNextPoint:function(e,t,o){this.PosCheck(this.matchList,e.x,e.y)&&void 0!=this.Blocks[e.x]&&void 0!=this.Blocks[e.x][e.y]&&this.Blocks[e.x][e.y].type==o.type&&this.checkPoint(e.x,e.y,t)},PosCheck:function(e,t,o){for(var i=0;i<e.length;i++)if(e[i].x==t&&e[i].y==o)return!1;return!0},createBlock:function(e,t,o,i,c){var s=cc.instantiate(this.BlockPrefeb),n=s.getComponent("Block"),a=0;if(void 0===o)do{if(++a>15)break;var l=this.getCardFromHand();n.init(l.id,l.type,l.level,e,t),this.Blocks[e][t]=n;var r=this.scanPoint(e,t,!0)}while(r.length>=3);else n.init(o,i,c,e,t),this.Blocks[e][t]=n;n.setTexture(),this.BlockGroup.addChild(s);var h=this;s.on(cc.Node.EventType.TOUCH_START,function(e){if(h.isInPlayAni||0==h.isCanMove)return!0;h.isTouchMove=!1;var t=e.getLocation(),o=h.convertTouchPosToBlock(t);h.selectBlock(o)}),s.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(h.isInPlayAni||0==h.isCanMove)return!0;h.isTouchMove=!0;var t,o,i=e.getStartLocation(),c=h.convertTouchPosToBlock(i),s=e.getLocation(),n=h.convertTouchPosToBlock(s);c.x==n.x&&c.y==n.y||((Math.abs(i.x-s.x)>40||Math.abs(i.y-s.y)>40)&&(t=i.x-s.x<-30?1:i.x-s.x>30?-1:0,o=i.y-s.y<-30?1:i.y-s.y>30?-1:0),void 0!==t&&void 0!==o&&(c.x==c.x+t&&c.y==c.y+o||h.selectBlock({x:c.x+t,y:c.y+o})))}),s.on(cc.Node.EventType.TOUCH_END,function(e){h.isInPlayAni||0==h.isCanMove||h.isTouchMove})},selectBlock:function(e){var t=this.lastPos;if(!(e.x<0||e.x>7||e.y<0||e.y>6)){var o=this.Blocks[e.x][e.y];if(o.active)if(e.x!=t.x||e.y!=t.y)if(Math.abs(e.x-t.x)>1||Math.abs(e.y-t.y)>1){o.select(),-10!=t.x&&-10!=t.y&&this.Blocks[t.x][t.y].unSelect(),this.lastPos=e}else{var c=this.Blocks[t.x][t.y];o.unSelect(),c.unSelect(),this.exchangeBlock(t,e),cc.tween(o.node).to(.3,{position:cc.v2(c.node.x,c.node.y),angle:0}).start(),cc.tween(c.node).to(.3,{position:cc.v2(o.node.x,o.node.y),angle:0}).start(),this.disableTouch(.3);var s=this.scanPoint(e.x,e.y,!1),n=this.scanPoint(t.x,t.y,!1);s.length>=3&&this.blockCrushQueue.push(s),n.length>=3&&this.blockCrushQueue.push(n),this.lastPos=cc.v2(-10,-10),i.PlayerVIT=i.PlayerVIT-1,this.updateUIdata(),i.PlayerVIT<=0&&(this.isInPlayAni=!0,this.isCanMove=!1,this.scheduleOnce(function(){this.finishCheck()},.3))}else o.seleced?(o.unSelect(),this.lastPos=cc.v2(-10,-10)):o.select()}},finishCheck:function(){this.scheduleOnce(function(){var e=this.crushBlock();this.scheduleOnce(function(){this.MakeUpBlock()},.3*(e+1))},.3)},MakeUpBlock:function(){for(var e=0;e<this.Blocks.length;e++){for(var t=0,o=0,i=0;i<this.Blocks[e].length;i++)if(0==cc.isValid(this.Blocks[e][i],!0)||null==this.Blocks[e][i])t++,o>i&&(o=i);else{this.Blocks[e][i].moveTo(e,o);var c=this.Blocks[e][i];this.Blocks[e][o]=c,o++}for(var s=0;s<t;s++)this.createBlock(e,6-t+s),this.Blocks[e][6-t+s].setPos(e,6+s),this.Blocks[e][6-t+s].moveTo(e,6-t+s)}this.blockCrushQueue=[];for(var n=0;n<7;n++)for(var a=0;a<6;a++){var l=this.scanPoint(n,a);l.length>=3&&this.blockCrushQueue.push(l)}this.blockCrushQueue.length>0?this.scheduleOnce(function(){this.finishCheck()},.3):this.scheduleOnce(function(){this.PlayerACTION(),this.EnemyACTION(),this.ReSetPlayerRound()},.3)},PlayerACTION:function(){this.PlayerRoundACT+=i.PlayerACT,this.PlayerRoundHEL+=i.PlayerRoundHEL,this.PlayerRoundHEL>0&&(i.playerHP+this.PlayerRoundHEL>i.PlayerMAXHP?i.playerHP+=i.PlayerMAXHP:i.playerHP+=this.PlayerRoundHEL),console.log("\u56de\u590d\u4e86",this.PlayerRoundHEL),this.Enemy.DEF>0&&(this.PlayerRoundACT-=this.Enemy.DEF),this.PlayerRoundACT<0&&(this.PlayerRoundACT=0),console.log("\u9020\u6210\u4f24\u5bb3",this.PlayerRoundACT),this.Enemy.HP-=this.PlayerRoundACT,this.Enemy.HP<=0&&(this.showMap(!0),this.isCanMove=!0,this.showMachtingUI(!1),i.PlayerCanMove=!0)},EnemyACTION:function(){this.PlayerRoundDEF+=i.PlayerDEF,this.PlayerRoundDEF>0&&(this.Enemy.ACT-=this.PlayerRoundDEF),this.Enemy.ACT<0&&(this.Enemy.ACT=0),i.PlayerHP-=this.Enemy.ACT,console.log("\u53d7\u5230\u4f24\u5bb3",this.Enemy.ACT),i.PlayerHP},ReSetPlayerRound:function(){i.PlayerVIT=i.PlayerMAXVIT,this.PlayerRoundACT=0,this.PlayerRoundDEF=0,this.PlayerRoundHEL=0,this.updateUIdata(),this.unLockCtroller()},unLockCtroller:function(){this.isInPlayAni=!1,this.isCanMove=!0},crushBlock:function(){for(var e,t=0,o=0;t<this.blockCrushQueue.length-1;){var i=!1;if(t!=o)for(var c=0;c<this.blockCrushQueue[t].length;c++){for(var s=0;s<this.blockCrushQueue[o].length;s++){if(this.blockCrushQueue[t][c].x==this.blockCrushQueue[o][s].x&&this.blockCrushQueue[t][c].y==this.blockCrushQueue[o][s].y){i=!0,this.blockCrushQueue[t]=this.blockCrushQueue[t].concat(this.blockCrushQueue[o]),o=0;break}if(this.Blocks[this.blockCrushQueue[t][c].x][this.blockCrushQueue[t][c].y].type==this.Blocks[this.blockCrushQueue[o][s].x][this.blockCrushQueue[o][s].y].type&&Math.abs(this.blockCrushQueue[t][c].x-this.blockCrushQueue[o][s].x)+Math.abs(this.blockCrushQueue[t][c].y-this.blockCrushQueue[o][s].y)==1){i=!0,this.blockCrushQueue[t]=this.blockCrushQueue[t].concat(this.blockCrushQueue[o]),this.blockCrushQueue.splice(o,1),o=0;break}}if(i)break}i||o++,o>this.blockCrushQueue.length-1&&(t++,o=0),i=!1}for(var n=0;n<this.blockCrushQueue.length;n++){for(var a=[],l=0;l<this.blockCrushQueue[n].length;l++){i=!1;for(var r=0;r<a.length;r++){if(a[r].x==this.blockCrushQueue[n][l].x&&a[r].y==this.blockCrushQueue[n][l].y){i=!0;break}if(i)break}i||a.push(this.blockCrushQueue[n][l])}this.blockCrushQueue[n]=a}for(e=0;e<this.blockCrushQueue.length;e++)for(var h=0,u=0,d=!0,y=0;y<this.blockCrushQueue[e].length;y++){var v=this.Blocks[this.blockCrushQueue[e][y].x][this.blockCrushQueue[e][y].y];if(0==y&&(0==v.type?(this.PlayerACTCount(this.blockCrushQueue[e].length-2),console.log("\u4f24\u5bb3\u603b\u8ba1",this.PlayerRoundACT)):1==v.type?(this.PlayerDEFCount(this.blockCrushQueue[e].length-2),console.log("\u9632\u5fa1\u603b\u8ba1",this.PlayerRoundDEF)):2==v.type&&(this.PlayerHELCount(this.blockCrushQueue[e].length-2),console.log("\u56de\u8840\u603b\u8ba1",this.PlayerRoundHEL))),v.lock(),this.blockCrushQueue[e].length>=6){var P=this.blockCrushQueue[e].length-5;P>5&&(P=5),d?(d=!1,v.levelUp(P),v.unLock(),h=this.blockCrushQueue[e][y].x,u=this.blockCrushQueue[e][y].y):(v.node.runAction(this.crushTween(v,.3*e,h,u)),this.Blocks[this.blockCrushQueue[e][y].x][this.blockCrushQueue[e][y].y]=null)}else v.node.runAction(this.crushTween(v,.3*e)),this.Blocks[this.blockCrushQueue[e][y].x][this.blockCrushQueue[e][y].y]=null}return this.blockCrushQueue.length},PlayerACTCount:function(e){this.PlayerRoundACT+=e},PlayerDEFCount:function(e){this.PlayerRoundDEF+=e},PlayerHELCount:function(e){this.PlayerRoundHEL+=e},crushTween:function(e,t,o,i){return void 0==o&&void 0==i?cc.sequence(cc.delayTime(t),cc.scaleTo(.3,0),cc.callFunc(e.destroySelf())):cc.sequence(cc.delayTime(t),cc.spawn(cc.moveTo(.3,64*o+32,64*i+32),cc.scaleTo(.3,0)),cc.callFunc(e.destroySelf()))},disableTouch:function(e){e<=0||(this.isInPlayAni=!0,this.node.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){this.isInPlayAni=!1},this))))},exchangeBlock:function(e,t){var o=this.Blocks[e.x][e.y];this.Blocks[e.x][e.y]=this.Blocks[t.x][t.y],this.Blocks[t.x][t.y]=o},convertTouchPosToBlock:function(e){if((e=this.MatchingController.convertToNodeSpaceAR(e)).x<0||e.x>480||e.y<0||e.y>416)return!1;var t=Math.floor(e.x/64),o=Math.floor(e.y/64);return cc.v2(t,o)},getCardFromHand:function(){var e=i.PlayerHands[i.PlayerHandIndex],t=(i.PlayerHandIndex+1)%i.PlayerHands.length;return i.PlayerHandIndex=t,0==t&&i.shuffleCard(),e},RoomEnterCheck:function(e,t){if(0==i.PlayerCanMove||e<=i.PlayerLevel)return!1;if(-1==i.PlayerLevel&&0==e)return!0;var o=i.PlayerRoom-t;if(-1==o)var c=1==i.MapData[i.PlayerLevel][i.PlayerRoom][2];else if(0==o)c=1==i.MapData[i.PlayerLevel][i.PlayerRoom][1];else{if(1!=o)return!1;c=1==i.MapData[i.PlayerLevel][i.PlayerRoom][0]}return!(i.PlayerLevel+1!=e||!c)},createMap:function(){for(var e=-2900,t=this.MapScrollView,o=this,c=new Array(i.MapData.length),s=0;s<i.MapData.length;s++){var n=i.MapData[s];c[s]=new Array(n.length);for(var a=0;a<n.length;a++){if(c[s][a]=new Array(2),0!=(v=n[a])[0]||0!=v[1]||0!=v[2]||0!=v[3]){s==i.MapData.length-1?(c[s][a][0]=90*a-290,c[s][a][1]=e+160*s+160):(c[s][a][0]=90*a-290+30*Math.random(),c[s][a][1]=e+160*s+30*Math.random());var l=new cc.Node(10*s+a),r=l.addComponent(cc.Sprite);r.sizeMode=cc.Sprite.SizeMode.CUSTOM,1==v[3]?r.spriteFrame=this.MapMonsterSprite:2==v[3]&&(r.spriteFrame=this.MapSlimeSprite),l.x=c[s][a][0],l.y=c[s][a][1],s==i.MapData.length-1?(l.width=384,l.height=384):(l.width=20,l.height=20),t.content.addChild(l),l.on(cc.Node.EventType.TOUCH_END,function(e){if(i.PlayerCanMove){var s=parseInt(e.target.name/10),n=e.target.name%10;if(o.RoomEnterCheck(s,n)){if(console.log("Enter Room",{Level:s,Room:n}),i.PlayerLevel=s,i.PlayerRoom=n,i.PlayerCanMove=!1,o.initEnemyFromList(s),s<i.MapData.length-1){var a=new cc.Node("Seleced"),l=a.addComponent(cc.Sprite);l.sizeMode=cc.Sprite.SizeMode.CUSTOM,l.spriteFrame=o.MapCircleSprite,a.x=c[s][n][0],a.y=c[s][n][1],a.width=40,a.height=40,a.angle=360*Math.random(),t.content.addChild(a)}o.showMap(!1),i.shuffleCard(),o.showMachtingUI(!0),o.updateUIdata()}}})}}}for(var h=cc.v2(0,0),u=cc.v2(0,0),d=0;d<i.MapData.length-1;d++){n=i.MapData[d];for(var y=0;y<n.length;y++){var v;(1==(v=n[y])[0]&&0!=y||1==v[1]||1==v[2]&&6!=y)&&(1==v[0]&&(h=cc.v2(c[d][y][0],c[d][y][1]),u=cc.v2(c[d+1][y-1][0],c[d+1][y-1][1]),d==i.MapData.length-2&&(u=cc.v2(1,e+160*d+160)),this.drawDot(h,u)),1==v[1]&&(h=cc.v2(c[d][y][0],c[d][y][1]),u=cc.v2(c[d+1][y][0],c[d+1][y][1]),d==i.MapData.length-2&&(u=cc.v2(1,e+160*d+160)),this.drawDot(h,u)),1==v[2]&&(h=cc.v2(c[d][y][0],c[d][y][1]),u=cc.v2(c[d+1][y+1][0],c[d+1][y+1][1]),d==i.MapData.length-2&&(u=cc.v2(1,e+160*d+160)),this.drawDot(h,u)))}}this.MapNode.active=!0},drawDot:function(e,t){var o=this.MapScrollView;if(0!=t.x&&0!=t.y)for(var i=cc.v2(0,0),c=1;c<=6;c++){var s=new cc.Node;s.addComponent(cc.Sprite).spriteFrame=this.MapDotSprite,e.lerp(t,.14*c,i),s.x=i.x+8*Math.random(),s.y=i.y+8*Math.random();var n=180*e.signAngle(t)/Math.PI;s.angle=-n,o.content.addChild(s)}},onBtnClick:function(e,t){"map"==t?this.showMap(!this.MapNode.active):"back"==t&&this.showMap(!1)},showMap:function(e){this.MapNode.active=e,this.BackButtonNode.active=e}}),cc._RF.pop()},{Global:"Global"}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"5b3fdjeHvRC5qAyfdc724hV","Global"),t.exports={Heros:[{id:0,heroName:"\u83bd\u592b",heroActive:!0},{id:1,heroName:"\u6682\u672a\u63a8\u51fa",heroActive:!1},{id:2,heroName:"\u6682\u672a\u63a8\u51fa",heroActive:!1},{id:3,heroName:"\u6682\u672a\u63a8\u51fa",heroActive:!1}],Cards:[{id:0,cardName:"\u653b\u51fb",cardClass:1,type:0,level:0},{id:1,cardName:"\u9632\u5fa1",cardClass:1,type:1,level:0},{id:2,cardName:"\u6cbb\u7597",cardClass:1,type:2,level:0}],Enemys:[{id:0,enemyName:"",MAXHP:100,HP:100,ACT:10,DEF:0,HEL:0}],ChooseMode:0,ChooseHero:0,MapData:[[[0,0,1,1],[0,0,0,0],[1,1,0,1],[0,0,1,1],[0,0,0,0],[1,0,1,1],[0,0,0,0]],[[0,0,0,0],[0,1,0,1],[0,0,1,1],[0,0,0,0],[1,0,0,1],[0,0,0,0],[1,0,0,1]],[[0,0,0,0],[1,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0]],[[0,1,0,1],[0,0,1,1],[0,0,0,0],[1,0,1,1],[0,0,0,0],[1,0,1,1],[0,0,0,0]],[[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,1,0,1]],[[0,0,1,1],[0,0,0,0],[0,0,1,1],[0,0,0,0],[1,0,0,1],[0,0,0,0],[0,1,0,1]],[[0,0,0,0],[1,0,0,1],[0,0,0,0],[1,0,1,1],[0,0,0,0],[0,0,0,0],[0,1,0,1]],[[0,0,1,1],[0,0,0,0],[1,0,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[1,0,0,1]],[[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,0,0,0],[1,1,0,1],[0,0,1,1],[0,0,0,0]],[[0,0,0,0],[1,0,0,1],[0,0,0,0],[1,0,0,1],[0,1,1,1],[0,0,0,0],[1,0,0,1]],[[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,0,1,1],[0,0,1,1],[0,0,0,0]],[[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,0,0,0],[1,0,1,1],[0,1,0,1]],[[0,0,1,1],[0,0,0,0],[1,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[1,0,0,1]],[[0,0,0,0],[0,0,1,1],[0,0,1,1],[0,0,0,0],[0,1,0,1],[1,0,0,1],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,1,1],[0,1,0,1],[1,0,0,1],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],PlayerCards:[],PlayerHP:0,PlayerMAXHP:0,PlayerMAXVIT:0,PlayerVIT:0,PlayerACT:0,PlayerDEF:0,PlayerHEL:0,PlayerGold:0,PlayerItem:[],PlayerLevel:0,PlayerRoom:0,PlayerCanMove:!1,PlayerHands:[],PlayerHandIndex:[],ItemList:[0,1,2,3,4,5],BossList:[0,1,2,3,4,5],MonsterList:[0,1,2,3,4,5],EnemyList:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],shuffleCard:function(){for(var e=[].concat(this.PlayerCards),t=e.length-1;t>=0;t--){var o=Math.floor(Math.random()*(t+1)),i=e[o];e[o]=e[t],e[t]=i}this.PlayerHands=e},initPlayerData:function(){this.PlayerFloor=0,this.PlayerCards=[{id:0,cardName:"\u653b\u51fb",cardClass:1,type:0,level:0},{id:0,cardName:"\u653b\u51fb",cardClass:1,type:0,level:0},{id:0,cardName:"\u653b\u51fb",cardClass:1,type:0,level:0},{id:0,cardName:"\u653b\u51fb",cardClass:1,type:0,level:0},{id:0,cardName:"\u653b\u51fb",cardClass:1,type:0,level:0},{id:1,cardName:"\u9632\u5fa1",cardClass:1,type:1,level:0},{id:1,cardName:"\u9632\u5fa1",cardClass:1,type:1,level:0},{id:1,cardName:"\u9632\u5fa1",cardClass:1,type:1,level:0},{id:1,cardName:"\u9632\u5fa1",cardClass:1,type:1,level:0},{id:1,cardName:"\u9632\u5fa1",cardClass:1,type:1,level:0},{id:2,cardName:"\u6cbb\u7597",cardClass:1,type:2,level:0},{id:2,cardName:"\u6cbb\u7597",cardClass:1,type:2,level:0},{id:2,cardName:"\u6cbb\u7597",cardClass:1,type:2,level:0},{id:2,cardName:"\u6cbb\u7597",cardClass:1,type:2,level:0},{id:2,cardName:"\u6cbb\u7597",cardClass:1,type:2,level:0}],this.shuffleCard(),this.PlayerHandIndex=0,this.PlayerMAXHP=100,this.PlayerHP=this.PlayerMAXHP,this.PlayerMAXVIT=2,this.PlayerVIT=this.PlayerMAXVIT,this.PlayerACT=0,this.PlayerDEF=0,this.PlayerHEL=0,this.PlayerGold=0,this.PlayerItem=[],this.PlayerLevel=-1,this.PlayerRoom=0,this.PlayerCanMove=1,this.MapData=[[[0,0,1,1],[0,0,0,0],[1,1,0,1],[0,0,0,0],[0,0,0,0],[1,0,1,1],[0,1,0,1]],[[0,0,0,0],[0,1,0,1],[0,0,1,1],[0,0,0,0],[1,0,0,1],[0,0,0,0],[1,0,0,1]],[[0,0,0,0],[1,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0]],[[0,1,0,1],[0,0,1,1],[0,0,0,0],[1,0,1,1],[0,0,0,0],[1,0,1,1],[0,0,0,0]],[[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,1,0,1]],[[0,0,1,1],[0,0,0,0],[0,0,1,1],[0,0,0,0],[1,0,0,1],[0,0,0,0],[0,1,0,1]],[[0,0,0,0],[1,0,0,1],[0,0,0,0],[1,0,1,1],[0,0,0,0],[0,0,0,0],[0,1,0,1]],[[0,0,1,1],[0,0,0,0],[1,0,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[1,0,0,1]],[[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,0,0,0],[1,1,0,1],[0,0,1,1],[0,0,0,0]],[[0,0,0,0],[1,0,0,1],[0,0,0,0],[1,0,0,1],[0,1,1,1],[0,0,0,0],[1,0,0,1]],[[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,0,1,1],[0,0,1,1],[0,0,0,0]],[[0,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[0,0,0,0],[1,0,1,1],[0,1,0,1]],[[0,0,1,1],[0,0,0,0],[1,1,0,1],[0,0,0,0],[0,1,0,1],[0,0,0,0],[1,0,0,1]],[[0,0,0,0],[0,0,1,1],[0,0,1,1],[0,0,0,0],[0,1,0,1],[1,0,0,1],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,1,1],[0,1,0,1],[1,0,0,1],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]}},cc._RF.pop()},{}],HeroButton:[function(e,t,o){"use strict";cc._RF.push(t,"b63d5h5ZMhPQZvmPHC2XDoD","HeroButton"),cc.Class({extends:cc.Component,properties:{id:0,label:cc.Label,button:cc.Button},start:function(){},init:function(e){this.id=e.id,this.label.string=e.name,this.button.interactable=e.active}}),cc._RF.pop()},{}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"11048qkF9tBGbHMLRae4I0M","Main"),cc.Class({extends:cc.Component,properties:{MainLayout:cc.Node,SelectModePrefab:cc.Prefab},start:function(){cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_WIDTH),cc.view.setDesignResolutionSize(960,640,cc.ResolutionPolicy.FIXED_WIDTH)},onBtnClick:function(e,t){"play"==t?(this.hide(),null==this.mSelectMode&&(this.mSelectMode=cc.instantiate(this.SelectModePrefab),cc.find("Canvas").addChild(this.mSelectMode),this.mSelectMode=this.mSelectMode.getComponent("SelectMode")),this.mSelectMode.show()):"exit"==t&&cc.game.end()},show:function(){this.MainLayout.active=!0},hide:function(){this.MainLayout.active=!1}}),cc._RF.pop()},{}],SelectHero:[function(e,t,o){"use strict";cc._RF.push(t,"dbba9JY/vJO57ZDLM+e/IyX","SelectHero");var i=e("Global");cc.Class({extends:cc.Component,properties:{StartButton:cc.Node,BackGround:cc.Node,HeroInfo:cc.Node,SelectLayout:cc.Node,HeroButton:cc.Prefab},start:function(){this.initSelectHeroButton()},initSelectHeroButton:function(){for(var e=this,t=this,o=this.SelectLayout,c=function(c){e.mHeroButton=cc.instantiate(e.HeroButton),o.addChild(e.mHeroButton),e.mHeroButton.getComponent("HeroButton").init({id:i.Heros[c].id,name:i.Heros[c].heroName,active:i.Heros[c].heroActive}),e.mHeroButton.on(cc.Node.EventType.TOUCH_END,function(e){t.onBtnClick(e,i.Heros[c].id)})},s=0;s<i.Heros.length;s++)c(s)},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},onBtnClick:function(e,t){"back"==t?(this.hide(),cc.find("Canvas/SelectModeNode").getComponent("SelectMode").show()):"start"==t?(0==i.ChooseMode&&i.initPlayerData(),cc.director.loadScene("Game")):"0"==t&&(this.HeroInfo.getChildByName("HeroName").getComponent(cc.Label).string=i.Heros[0].heroName,this.BackGround.color=new cc.Color(0,0,0,255),this.BackGround.opacity=255,i.ChooseHero=0,this.StartButton.active=!0)}}),cc._RF.pop()},{Global:"Global"}],SelectMode:[function(e,t,o){"use strict";cc._RF.push(t,"e0678rtMHdH+JrKRXW9opmP","SelectMode");var i=e("Global");cc.Class({extends:cc.Component,properties:{SelectHeroPrefab:cc.Prefab},start:function(){},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},onBtnClick:function(e,t){"back"==t?(this.hide(),cc.find("Canvas/Main Camera").getComponent("Main").show()):"normal"==t&&(this.hide(),null==this.mSelectHero&&(this.mSelectHero=cc.instantiate(this.SelectHeroPrefab),cc.find("Canvas").addChild(this.mSelectHero),this.mSelectHero=this.mSelectHero.getComponent("SelectHero")),this.mSelectHero.show(),i.ChooseMode=0)}}),cc._RF.pop()},{Global:"Global"}]},{},["Global","Game","Main","Block","HeroButton","SelectHero","SelectMode"]);