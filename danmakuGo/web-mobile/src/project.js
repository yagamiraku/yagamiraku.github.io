window.__require=function e(t,o,n){function i(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var h=o[a]={exports:{}};t[a][0].call(h.exports,function(e){return i(t[a][1][e]||e)},h,h.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({Enemy:[function(e,t,o){"use strict";cc._RF.push(t,"86076awQKxKpqWhpsg1FDmt","Enemy");var n=e("Global");cc.Class({extends:cc.Component,properties:{seed:0,EnemyBullet1Prefeb:cc.Prefab,EnemyBullet2Prefeb:cc.Prefab},start:function(){this.dtCount=0,this.schedule(function(){if(0==n.danmakuMode)for(var e=0;e<45;e++)this.createEnemyBulletFromBoss(1,this.seed+8*e,200);else if(1==n.danmakuMode)for(var t=0;t<45;t++)this.seed%2==0?this.createEnemyBulletFromBoss(1,t+225,200):this.createEnemyBulletFromBoss(1,t+270,200);else if(2==n.danmakuMode){for(var o=0;o<45;o++)this.createEnemyBulletFromBoss(1,this.seed+16*o,200);for(var i=0;i<45;i++)this.createEnemyBulletFromBoss(1,this.seed+16*i,400)}this.seed+=1},.5)},createEnemyBulletFromBoss:function(e,t,o){if(this.EnemyBullet1Prefeb){if(1==e)var n=cc.instantiate(this.EnemyBullet1Prefeb);else if(1==e)n=cc.instantiate(this.EnemyBullet2Prefeb);this.node.addChild(n),console.log(this),n.position=this.node.position,n.x+=0,n.parent=this.node.parent;var i=Math.sqrt(Math.pow(cc.winSize.width-this.node.x,2)+Math.pow(cc.winSize.height-this.node.y,2)),r=i/o,a=cc.moveBy(r,cc.v2(Math.cos(t/180*Math.PI)*i,Math.sin(t/180*Math.PI)*i)),c=cc.removeSelf(),s=cc.sequence(a,c);n.runAction(s)}},onCollisionEnter:function(e,t){if("PlayerBullet"==e.node.name)if(e.node.destroy(),n.HP>0)n.HP-=1,n.score+=1;else if(-1!=n.danmakuMode){var o=n.danmakuMode;n.danmakuMode=-1,n.godMode=!0,n.death+=1,this.send=0,this.node.removeAllChildren(!0),this.scheduleOnce(function(){n.danmakuMode=o+1,n.godMode=!1,n.HP=600},5)}},update:function(e){}}),cc._RF.pop()},{Global:"Global"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"5ed84xzYjpLZKMBrmL7r8SX","Game");var n=e("Global");cc.Class({extends:cc.Component,properties:{PlayerBulletPrefeb:cc.Prefab,UI_HP:cc.Label,UI_Score:cc.Label,UI_Death:cc.Label,UI_Life:cc.Label},onLoad:function(){var e=this;this.Player=null,this.nodePos=null,this.Enemy=null,this.Fire=!1,this.dtCount=0,cc.loader.loadRes("Prefab/Player",function(t,o){e.Player=cc.instantiate(o),e.node.addChild(e.Player),e.nodePos=e.Player.getPosition(),e.Player.parent.on(cc.Node.EventType.TOUCH_MOVE,e.onTouchMove,e),e.Player.parent.on(cc.Node.EventType.TOUCH_START,e.onTouchStart,e),e.Player.parent.on(cc.Node.EventType.TOUCH_END,e.onTouchEnd,e),e.Player.parent.on(cc.Node.EventType.TOUCH_CANCEL,e.onTouchCancel,e)}),cc.loader.loadRes("Prefab/Enemy",function(t,o){e.Enemy=cc.instantiate(o),e.Enemy.getComponent("Enemy").danmakuMode=0,e.node.addChild(e.Enemy)}),n.init();var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!0,t.enabledDrawBoundingBox=!0},start:function(){},onTouchStart:function(e){this.Fire=!0,this.nodePos=this.Player.getPosition()},onTouchMove:function(e){if(0==n.lockController){this.Fire=!0;var t=e.getTouches(),o=this.Player.parent.convertToNodeSpaceAR(t[0].getStartLocation()),i=this.Player.parent.convertToNodeSpaceAR(t[0].getLocation()),r=o.sub(i);this.Player.x=this.nodePos.x-r.x,this.Player.y=this.nodePos.y-r.y;var a=-this.Player.parent.width/2+this.Player.width/2,c=Math.abs(a),s=-this.Player.parent.height/2+this.Player.height/2,l=Math.abs(s),h=this.Player.getPosition();h.x<a&&(h.x=a),h.x>c&&(h.x=c),h.y<s&&(h.y=s),h.y>l&&(h.y=l),this.Player.setPosition(h)}},onTouchEnd:function(){0==n.lockController&&(this.Fire=!1,this.nodePos=this.Player.getPosition())},onTouchCancel:function(){0==n.lockController&&(this.Fire=!1,this.nodePos=this.Player.getPosition())},update:function(e){1==n.lockController&&(this.Fire=!1),this.Fire&&(this.dtCount+=e,this.dtCount>.05&&(this.dtCount=0,this.createPlayerBullet(10),this.createPlayerBullet(-10))),this.UI_HP.string=n.HP+" / "+n.MaxHP,this.UI_Score.string="Score: "+n.score,this.UI_Death.string="Death: "+n.death,this.UI_Life.string="Life: "+n.life},createPlayerBullet:function(e){var t=cc.instantiate(this.PlayerBulletPrefeb);this.node.addChild(t),t.position=this.Player.position,t.x+=e,t.parent=this.Player.parent;var o=cc.winSize.height-this.Player.y,n=o/1e3,i=cc.moveBy(n,cc.v2(0,o)),r=cc.removeSelf(),a=cc.sequence(i,r);t.runAction(a)}}),cc._RF.pop()},{Global:"Global"}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"b7662dqrMtDSbpIpKOF+QBk","Global"),t.exports={life:0,death:0,score:0,lockController:!1,godMode:!1,MaxHP:0,HP:0,danmakuMode:0,init:function(){this.life=30,this.death=0,this.score=0,this.lockController=!1,this.godMode=!1,this.MaxHP=600,this.HP=600,this.danmakuMode=0}},cc._RF.pop()},{}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"11421JmmbJD5YUeqZsYSZI0","Main"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_WIDTH),cc.view.setDesignResolutionSize(640,960,cc.ResolutionPolicy.FIXED_WIDTH),cc.director.preloadScene("Game")},startButtonOnClick:function(){cc.director.loadScene("Game")}}),cc._RF.pop()},{}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"17460H8yNhLMI+h6yLkJSl/","Player");var n=e("Global");cc.Class({extends:cc.Component,properties:{},start:function(){this.anim=this.getComponent(cc.Animation)},onCollisionEnter:function(e,t){console.log(e.node.name),"EnemyBullet"!=e.node.name&&"Enemy"!=e.node.name||n.godMode||0!=n.lockController||(n.lockController=!0,this.anim.play("Player_Death"))},playerDeath:function(){console.log("playerDeath"),n.lockController=!1,n.godMode=!0,this.anim.play("Player"),this.node.x=0,this.node.y=-320,n.life>0&&(n.life-=1),this.scheduleOnce(function(){n.godMode=!1},3)}}),cc._RF.pop()},{Global:"Global"}]},{},["Enemy","Game","Global","Main","Player"]);